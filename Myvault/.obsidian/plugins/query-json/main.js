/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => QJSON
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/functions.ts
function parseQuery(query) {
  const parts = query.split(".");
  return parts.map((part) => {
    const match = part.match(/(\w+)\[(.*)\]/);
    if (match) {
      return {
        type: "filter",
        field: match[1],
        condition: match[2]
      };
    }
    return {
      type: "field",
      name: part
    };
  });
}
function parseCondition(condition) {
  const logicalOperators = ["&&", "||"];
  let conditions = [];
  let operators = [];
  let remainingCondition = condition;
  logicalOperators.forEach((operator) => {
    if (remainingCondition.includes(operator)) {
      const parts = remainingCondition.split(operator).map((s) => s.trim());
      conditions.push(parseSingleCondition(parts[0]));
      operators.push(operator);
      remainingCondition = parts[1];
    }
  });
  if (conditions.length === 0) {
    conditions.push(parseSingleCondition(remainingCondition));
  } else {
    conditions.push(parseSingleCondition(remainingCondition));
  }
  return { conditions, operators };
}
function parseSingleCondition(condition) {
  const comparisonOperators = [">=", "<=", "==", ">", "<", "!="];
  for (let operator of comparisonOperators) {
    if (condition.includes(operator)) {
      const [key, value] = condition.split(operator).map((s) => s.trim());
      return { key, operator, value };
    }
  }
  throw new Error(`Invalid condition: ${condition}`);
}
function executeQuery(json, parsedQuery) {
  let result = json;
  let finalResult;
  parsedQuery.forEach((part) => {
    if (part.type === "field") {
      result = result[part.name];
    } else if (part.type === "filter") {
      const { conditions, operators } = parseCondition(part.condition);
      const filteredResult = result[part.field].filter((item) => {
        return evaluateConditions(item, conditions, operators);
      });
      if (!finalResult) {
        finalResult = filteredResult;
      } else {
        finalResult = finalResult.concat(filteredResult);
      }
    }
  });
  finalResult = finalResult || result;
  try {
    if (parsedQuery.length > 0 && parsedQuery[parsedQuery.length - 1].type === "field") {
      finalResult = finalResult.map((item) => item[parsedQuery[parsedQuery.length - 1].name]);
    }
  } catch (e) {
    console.error(e);
    return finalResult;
  }
  return finalResult;
}
function evaluateConditions(item, conditions, operators) {
  let result = evaluateCondition(item, conditions[0]);
  for (let i = 0; i < operators.length; i++) {
    const operator = operators[i];
    const nextConditionResult = evaluateCondition(item, conditions[i + 1]);
    if (operator === "&&") {
      result = result && nextConditionResult;
    } else if (operator === "||") {
      result = result || nextConditionResult;
    }
  }
  return result;
}
function evaluateCondition(item, condition) {
  const { key, operator, value } = condition;
  switch (operator) {
    case ">=":
      return item[key] >= Number(value);
    case "<=":
      return item[key] <= Number(value);
    case "==":
      return item[key] == value;
    case ">":
      return item[key] > Number(value);
    case "<":
      return item[key] < Number(value);
    case "!=":
      return item[key] != value;
    default:
      return false;
  }
}

// src/main.ts
var QJSON = class extends import_obsidian.Plugin {
  async onload() {
    const statusBarItemEl = this.addStatusBarItem();
    let qjCount;
    qjCount = document.querySelectorAll(".cdQjson").length;
    statusBarItemEl.setText("QJSON: " + qjCount);
    this.registerMarkdownCodeBlockProcessor("qjson", async (source, el, ctx) => {
      if (!source.includes("#qj-id:")) {
        new import_obsidian.Notice("No ID found");
        el.createEl("pre", { text: "No ID found" });
        return;
      }
      const id = source.match(/#qj-id: (\d+)/)[1];
      if (isNaN(id)) {
        new import_obsidian.Notice("ID must be a number");
        el.createEl("pre", { text: "ID must be a number" });
        return;
      }
      let query;
      if (source.includes("#qj-query:")) {
        query = source.match(/#qj-query: (.+)/)[1];
        query = parseQuery(query);
      }
      let format;
      if (source.includes("#qj-format:")) {
        const validFormat = ["list", "table", "img"];
        format = source.match(/#qj-format: (.+)/)[1];
      }
      let desc;
      if (!source.includes("#qj-hide-id")) {
        try {
          desc = source.match(/#qj-desc: (.+)/)[1];
        } catch (e) {
          desc = "\xBB\xBB\xBB Query JSON \xAB\xAB\xAB";
        }
        el.createEl("h3", { text: desc, cls: "centerQJtext" });
        el.createEl("h4", { text: "ID: " + id, cls: "centerQJtext" });
      }
      let showJson = "notHere";
      if (source.includes("#qj-show-json")) {
        showJson = "";
      }
      if (source.includes("#qj-file:")) {
        const file = source.match(/#qj-file: (.+)/)[1];
        const response = await this.app.vault.adapter.read(file);
        source = response;
      }
      const json = JSON.parse(source);
      if (query) {
        const result = executeQuery(json, query);
        if (format && query[query.length - 1].type === "field") {
          if (format === "list") {
            const ul = el.createEl("ul");
            if (typeof result === "string") {
              ul.createEl("li", { text: result });
            } else {
              for (let i = 0; i < result.length; i++) {
                ul.createEl("li", { text: JSON.stringify(result[i], null, 2) });
              }
            }
          } else if (format === "table") {
            const table = el.createEl("table");
            const tbody = table.createEl("tbody");
            if (typeof result === "object") {
              for (const key in result) {
                const tr = tbody.createEl("tr");
                tr.createEl("th", { text: key });
                tr.createEl("td", { text: JSON.stringify(result[key], null, 2) });
              }
            } else {
              const tr = tbody.createEl("tr");
              tr.createEl("td", { text: result });
            }
          } else if (format === "img") {
            if (typeof result === "string") {
              el.createEl("img", { attr: { src: result } });
            } else {
              for (let i = 0; i < result.length; i++) {
                el.createEl("img", { attr: { src: result[i], width: 100, height: 100 } });
              }
            }
          }
          return;
        }
        el.createEl("pre", { text: JSON.stringify(result, null, 2), cls: "QJSON-" + id + " cdQjson " + showJson });
      } else {
        el.createEl("pre", { text: JSON.stringify(json, null, 2), cls: "QJSON-" + id + " cdQjson " + showJson });
      }
      qjCount = document.querySelectorAll(".cdQjson").length;
      statusBarItemEl.setText("QJSON: " + qjCount);
    });
    this.registerEvent(this.app.workspace.on("editor-change", async (editor, info) => {
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      const lastChar = line[line.length - 1];
      const match = line.match(/@(.+)>(.+)|@(.+)>/);
      if (!match)
        return;
      if (lastChar !== ";" && lastChar !== "." && lastChar !== ">")
        return;
      const id = match[1] || match[3];
      let path = "";
      if (match[2] !== void 0) {
        path = match[2].slice(0, -1).replace(/>/, "");
      }
      let json;
      if (!isNaN(parseInt(id)) && !id.includes(".json")) {
        const el = document.querySelector(".QJSON-" + id);
        if (!el)
          return;
        json = JSON.parse(el.innerText);
      } else {
        json = JSON.parse(await this.app.vault.adapter.read(id));
      }
      const value = getJSONPath(json, path);
      if (lastChar !== ";") {
        if (value !== void 0) {
          const notice = document.querySelector(".notice");
          if (notice)
            notice.remove();
          const keys = Object.keys(value);
          const keysAreNumbers = keys.every((key) => !isNaN(parseInt(key)));
          if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
            new import_obsidian.Notice(value.toString());
          } else if (keysAreNumbers) {
            new import_obsidian.Notice("Total Keys: " + (keys.length - 1));
          } else {
            new import_obsidian.Notice("Total Keys: " + keys.length + "\n____________\n" + keys.join("\n"));
          }
        }
      } else {
        const atIndex = line.indexOf("@");
        const replaceEnd = { line: cursor.line, ch: line.length };
        const stringValue = typeof value === "string" ? value : JSON.stringify(value);
        editor.replaceRange(stringValue, { line: cursor.line, ch: atIndex }, replaceEnd);
      }
    }));
  }
};
function getJSONPath(json, path) {
  if (path === "")
    return json;
  return path.split(".").reduce((acc, key) => acc[key], json);
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2Z1bmN0aW9ucy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHBhcnNlUXVlcnksIGV4ZWN1dGVRdWVyeX0gZnJvbSAnLi9mdW5jdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRSlNPTiBleHRlbmRzIFBsdWdpbiB7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGNvbnN0IHN0YXR1c0Jhckl0ZW1FbCA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuXHRcdGxldCBxakNvdW50O1xuXHRcdHFqQ291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2RRanNvbicpLmxlbmd0aDtcblx0XHRzdGF0dXNCYXJJdGVtRWwuc2V0VGV4dCgnUUpTT046ICcgKyBxakNvdW50KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcihcInFqc29uXCIsIGFzeW5jIChzb3VyY2UsIGVsLCBjdHgpID0+IHtcblx0XHRcdGlmICghc291cmNlLmluY2x1ZGVzKCcjcWotaWQ6JykpIHtcblx0XHRcdFx0bmV3IE5vdGljZSgnTm8gSUQgZm91bmQnKTtcblx0XHRcdFx0ZWwuY3JlYXRlRWwoJ3ByZScsIHt0ZXh0OiAnTm8gSUQgZm91bmQnfSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgaWQgPSBzb3VyY2UubWF0Y2goLyNxai1pZDogKFxcZCspLylbMV07XG5cdFx0XHQvLyBjaGVjayBpZiBpZCBpcyBhIG51bWJlclxuXHRcdFx0aWYgKGlzTmFOKGlkKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKCdJRCBtdXN0IGJlIGEgbnVtYmVyJyk7XG5cdFx0XHRcdGVsLmNyZWF0ZUVsKCdwcmUnLCB7dGV4dDogJ0lEIG11c3QgYmUgYSBudW1iZXInfSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0bGV0IHF1ZXJ5O1xuXG5cdFx0XHRpZiAoc291cmNlLmluY2x1ZGVzKCcjcWotcXVlcnk6JykpIHtcblx0XHRcdFx0cXVlcnkgPSBzb3VyY2UubWF0Y2goLyNxai1xdWVyeTogKC4rKS8pWzFdO1xuXHRcdFx0XHRxdWVyeSA9IHBhcnNlUXVlcnkocXVlcnkpO1xuXHRcdFx0fVxuXG5cbiAgICAgIGxldCBmb3JtYXQ7XG5cbiAgICAgIGlmIChzb3VyY2UuaW5jbHVkZXMoJyNxai1mb3JtYXQ6JykpIHtcbiAgICAgICAgY29uc3QgdmFsaWRGb3JtYXQgPSBbXCJsaXN0XCIsIFwidGFibGVcIiwgXCJpbWdcIl1cbiAgICAgICAgZm9ybWF0ID0gc291cmNlLm1hdGNoKC8jcWotZm9ybWF0OiAoLispLylbMV07XG4gICAgICB9XG5cblx0XHRcdGxldCBkZXNjO1xuXG5cdFx0XHRpZiAoIXNvdXJjZS5pbmNsdWRlcygnI3FqLWhpZGUtaWQnKSkge1xuXHRcdFx0ICAgIHRyeSB7XG5cdFx0XHQgICAgICAgIGRlc2MgPSBzb3VyY2UubWF0Y2goLyNxai1kZXNjOiAoLispLylbMV07XG5cdFx0XHQgICAgfSBjYXRjaCAoZSkge1xuXHRcdFx0ICAgICAgICBkZXNjID0gXCJcdTAwQkJcdTAwQkJcdTAwQkIgUXVlcnkgSlNPTiBcdTAwQUJcdTAwQUJcdTAwQUJcIjtcblx0XHRcdCAgICB9XG5cdFx0XHQgICAgZWwuY3JlYXRlRWwoJ2gzJywge3RleHQ6IGRlc2MsIGNsczogJ2NlbnRlclFKdGV4dCd9KTtcblx0XHRcdCAgICBlbC5jcmVhdGVFbCgnaDQnLCB7dGV4dDogXCJJRDogXCIgKyBpZCwgY2xzOiAnY2VudGVyUUp0ZXh0J30pO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgc2hvd0pzb24gPSAnbm90SGVyZSc7XG5cblx0XHRcdGlmIChzb3VyY2UuaW5jbHVkZXMoJyNxai1zaG93LWpzb24nKSkge1xuXHRcdFx0XHRzaG93SnNvbiA9ICcnO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc291cmNlLmluY2x1ZGVzKCcjcWotZmlsZTonKSkge1xuXHRcdFx0XHRjb25zdCBmaWxlID0gc291cmNlLm1hdGNoKC8jcWotZmlsZTogKC4rKS8pWzFdO1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlKTtcblx0XHRcdFx0c291cmNlID0gcmVzcG9uc2U7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKHNvdXJjZSk7XG5cblx0XHRcdGlmIChxdWVyeSkge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBleGVjdXRlUXVlcnkoanNvbiwgcXVlcnkpO1xuXG4gICAgICAgIGlmIChmb3JtYXQgJiYgcXVlcnlbcXVlcnkubGVuZ3RoIC0gMV0udHlwZSA9PT0gXCJmaWVsZFwiKSB7XG4gICAgICAgICBpZiAoZm9ybWF0ID09PSBcImxpc3RcIikge1xuICAgICAgICAgICAgICBjb25zdCB1bCA9IGVsLmNyZWF0ZUVsKCd1bCcpO1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIHVsLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogcmVzdWx0IH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICB1bC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IEpTT04uc3RyaW5naWZ5KHJlc3VsdFtpXSwgbnVsbCwgMikgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdCA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gZWwuY3JlYXRlRWwoJ3RhYmxlJyk7XG4gICAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHIgPSB0Ym9keS5jcmVhdGVFbCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgICB0ci5jcmVhdGVFbCgndGgnLCB7IHRleHQ6IGtleSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB0ci5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IEpTT04uc3RyaW5naWZ5KHJlc3VsdFtrZXldLCBudWxsLCAyKSB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRyID0gdGJvZHkuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICAgICAgICAgICAgICB0ci5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHJlc3VsdCB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0ID09PSBcImltZ1wiKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgZWwuY3JlYXRlRWwoJ2ltZycsIHsgYXR0cjogeyBzcmM6IHJlc3VsdCB9IH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuY3JlYXRlRWwoJ2ltZycsIHsgYXR0cjogeyBzcmM6IHJlc3VsdFtpXSwgd2lkdGg6IDEwMCwgaGVpZ2h0OiAxMDAgfSB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG5cblx0XHRcdCBlbC5jcmVhdGVFbCgncHJlJywge3RleHQ6IEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgMiksIGNsczogJ1FKU09OLScraWQrJyBjZFFqc29uICcrc2hvd0pzb259KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsLmNyZWF0ZUVsKCdwcmUnLCB7dGV4dDogSlNPTi5zdHJpbmdpZnkoanNvbiwgbnVsbCwgMiksIGNsczogJ1FKU09OLScraWQrJyBjZFFqc29uICcrc2hvd0pzb259KTtcblx0XHRcdH1cblxuXHRcdFx0cWpDb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZFFqc29uJykubGVuZ3RoO1xuXHRcdFx0c3RhdHVzQmFySXRlbUVsLnNldFRleHQoJ1FKU09OOiAnICsgcWpDb3VudCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywgYXN5bmMgKGVkaXRvciwgaW5mbykgPT4ge1xuXHRcdCAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuXHRcdCAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcblxuXHRcdCAgY29uc3QgbGFzdENoYXIgPSBsaW5lW2xpbmUubGVuZ3RoIC0gMV07XG5cblx0XHQgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvQCguKyk+KC4rKXxAKC4rKT4vKTtcblx0XHQgIGlmICghbWF0Y2gpIHJldHVybjtcblxuXHRcdCAgaWYgKGxhc3RDaGFyICE9PSAnOycgJiYgbGFzdENoYXIgIT09ICcuJyAmJiBsYXN0Q2hhciAhPT0gJz4nKSByZXR1cm47XG5cblx0XHQgIGNvbnN0IGlkID0gbWF0Y2hbMV0gfHwgbWF0Y2hbM107XG5cdFx0ICBsZXQgcGF0aCA9IFwiXCI7XG5cdFx0ICBcblx0XHQgIGlmIChtYXRjaFsyXSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0ICBcdHBhdGggPSBtYXRjaFsyXS5zbGljZSgwLCAtMSkucmVwbGFjZSgvPi8sICcnKVxuXHRcdCAgfVxuXG5cdFx0ICBsZXQganNvbjtcblxuXHRcdCAgaWYgKCFpc05hTihwYXJzZUludChpZCkpICYmICFpZC5pbmNsdWRlcygnLmpzb24nKSkge1xuXHRcdCAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5RSlNPTi0nICsgaWQpO1xuXHRcdFx0aWYgKCFlbCkgcmV0dXJuO1xuXHRcdCAgXHRqc29uID0gSlNPTi5wYXJzZShlbC5pbm5lclRleHQpO1xuXHRcdCAgfSBlbHNlIHtcblx0XHQgIFx0anNvbiA9IEpTT04ucGFyc2UoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGlkKSk7XG5cdFx0ICB9XG5cblx0XHQgIGNvbnN0IHZhbHVlID0gZ2V0SlNPTlBhdGgoanNvbiwgcGF0aCk7XG5cblx0XHQgIGlmIChsYXN0Q2hhciAhPT0gJzsnKSB7XG5cdFx0ICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHQgIFx0Y29uc3Qgbm90aWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGljZScpO1xuXHRcdFx0ICBcdGlmIChub3RpY2UpIG5vdGljZS5yZW1vdmUoKTtcblx0XHRcdCAgXHRcblx0XHQgICAgXHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuXHRcdCAgICBcdGNvbnN0IGtleXNBcmVOdW1iZXJzID0ga2V5cy5ldmVyeShrZXkgPT4gIWlzTmFOKHBhcnNlSW50KGtleSkpKTtcblxuXHRcdFx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZSh2YWx1ZS50b1N0cmluZygpKTtcblx0XHQgICAgXHR9IGVsc2UgaWYgKGtleXNBcmVOdW1iZXJzKSB7XG5cdFx0ICAgIFx0XHRuZXcgTm90aWNlKCdUb3RhbCBLZXlzOiAnICsgKGtleXMubGVuZ3RoLSAxICkpO1xuXHRcdCAgICBcdH0gZWxzZSB7XG5cdFx0ICAgIFx0XHRuZXcgTm90aWNlKCdUb3RhbCBLZXlzOiAnICsga2V5cy5sZW5ndGggKyAnXFxuJyArICdfX19fX19fX19fX18nICsgJ1xcbicgKyBrZXlzLmpvaW4oJ1xcbicpKTtcblx0XHQgICAgXHR9XG5cdFx0ICAgIH0gXG5cdFx0ICB9IGVsc2Uge1xuXHRcdCAgICBjb25zdCBhdEluZGV4ID0gbGluZS5pbmRleE9mKCdAJyk7XG5cdFx0ICAgIGNvbnN0IHJlcGxhY2VFbmQgPSB7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogbGluZS5sZW5ndGggfTsgLy8gUmVwbGFjZSB0byBlbmQgb2YgbGluZVxuXHRcdCAgICBjb25zdCBzdHJpbmdWYWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcblx0XHQgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShzdHJpbmdWYWx1ZSwgeyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IGF0SW5kZXggfSwgcmVwbGFjZUVuZCk7XG5cdFx0ICB9XG5cdFx0fSkpO1xuXG4gICAgLy8gdGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3NvciggYXN5bmMgKGVsZW1lbnQsIGNvbnRleHQpID0+IHtcbiAgICAvLyAgIGNvbnN0IGNvZGVibG9ja3MgPSBlbGVtZW50LmZpbmRBbGwoXCJjb2RlXCIpO1xuXG4gICAgLy8gICBmb3IgKGxldCBjb2RlYmxvY2sgb2YgY29kZWJsb2Nrcykge1xuICAgIC8vICAgICBpZiAoY29kZWJsb2NrLmNsYXNzTGlzdC5sZW5ndGggPj0gMSkgcmV0dXJuO1xuXG4gICAgLy8gICAgIGNvbnN0IHRleHQgPSBjb2RlYmxvY2suaW5uZXJUZXh0O1xuICAgIC8vICAgICBjb25zdCByZWdleCA9IC9AKC4rKVxcLmpzb24+KC4rKTsvO1xuICAgIC8vICAgICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2gocmVnZXgpO1xuXG4gICAgLy8gICAgIGlmIChtYXRjaCkge1xuICAgIC8vICAgICAgIGxldCByZXN1bHQ7XG5cbiAgICAvLyAgICAgICB0cnkge1xuICAgIC8vICAgICAgICAgbGV0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQobWF0Y2hbMV0gKyBcIi5qc29uXCIpO1xuICAgIC8vICAgICAgICAgZmlsZSA9IEpTT04ucGFyc2UoZmlsZSk7XG4gICAgLy8gICAgICAgICByZXN1bHQgPSBnZXRKU09OUGF0aChmaWxlLCBtYXRjaFsyXSk7XG4gICAgLy8gICAgICAgfSBjYXRjaCAoZSkge1xuICAgIC8vICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAvLyAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciEgU29tZXRoaW5nIHdlbnQgd3JvbmchXCIpO1xuICAgIC8vICAgICAgICAgcmVzdWx0ID0gXCJFcnJvciFcIjtcbiAgICAvLyAgICAgICB9XG5cbiAgICAvLyAgICAgICBsZXQgc3RyaW5nUmVzdWx0O1xuICAgIC8vICAgICAgIGxldCB0YWdOYW1lO1xuXG4gICAgLy8gICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHJlc3VsdCA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgcmVzdWx0ID09PSBcImJvb2xlYW5cIikge1xuICAgIC8vICAgICAgICAgc3RyaW5nUmVzdWx0ID0gcmVzdWx0O1xuICAgIC8vICAgICAgICAgdGFnTmFtZSA9IFwic3BhblwiO1xuICAgIC8vICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICBzdHJpbmdSZXN1bHQgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDIpO1xuICAgIC8vICAgICAgICAgdGFnTmFtZSA9IFwicHJlXCI7XG4gICAgLy8gICAgICAgfVxuXG4gICAgLy8gICAgICAgY29uc3QgcmVzdWx0RWwgPSBjb2RlYmxvY2suY3JlYXRlRWwodGFnTmFtZSwge3RleHQ6IHN0cmluZ1Jlc3VsdH0pO1xuICAgIC8vICAgICAgIGNvZGVibG9jay5yZXBsYWNlV2l0aChyZXN1bHRFbCk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH1cbiAgICAvLyB9KTtcblx0fVxuXG59XG5cbmZ1bmN0aW9uIGdldEpTT05QYXRoKGpzb246IE9iamVjdCwgcGF0aDogc3RyaW5nKSB7XG5cdGlmIChwYXRoID09PSAnJykgcmV0dXJuIGpzb247XG5cdHJldHVybiBwYXRoLnNwbGl0KCcuJykucmVkdWNlKChhY2MsIGtleSkgPT4gYWNjW2tleV0sIGpzb24pO1xufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBwYXJzZVF1ZXJ5KHF1ZXJ5KSB7XG4gICAgY29uc3QgcGFydHMgPSBxdWVyeS5zcGxpdCgnLicpO1xuICAgIHJldHVybiBwYXJ0cy5tYXAocGFydCA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gcGFydC5tYXRjaCgvKFxcdyspXFxbKC4qKVxcXS8pO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2ZpbHRlcicsXG4gICAgICAgICAgICAgICAgZmllbGQ6IG1hdGNoWzFdLFxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogbWF0Y2hbMl1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmaWVsZCcsXG4gICAgICAgICAgICBuYW1lOiBwYXJ0XG4gICAgICAgIH07XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ29uZGl0aW9uKGNvbmRpdGlvbikge1xuICAgIGNvbnN0IGxvZ2ljYWxPcGVyYXRvcnMgPSBbJyYmJywgJ3x8J107XG4gICAgbGV0IGNvbmRpdGlvbnMgPSBbXTtcbiAgICBsZXQgb3BlcmF0b3JzID0gW107XG5cbiAgICBsZXQgcmVtYWluaW5nQ29uZGl0aW9uID0gY29uZGl0aW9uO1xuICAgIGxvZ2ljYWxPcGVyYXRvcnMuZm9yRWFjaChvcGVyYXRvciA9PiB7XG4gICAgICAgIGlmIChyZW1haW5pbmdDb25kaXRpb24uaW5jbHVkZXMob3BlcmF0b3IpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHJlbWFpbmluZ0NvbmRpdGlvbi5zcGxpdChvcGVyYXRvcikubWFwKHMgPT4gcy50cmltKCkpO1xuICAgICAgICAgICAgY29uZGl0aW9ucy5wdXNoKHBhcnNlU2luZ2xlQ29uZGl0aW9uKHBhcnRzWzBdKSk7XG4gICAgICAgICAgICBvcGVyYXRvcnMucHVzaChvcGVyYXRvcik7XG4gICAgICAgICAgICByZW1haW5pbmdDb25kaXRpb24gPSBwYXJ0c1sxXTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGNvbmRpdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChwYXJzZVNpbmdsZUNvbmRpdGlvbihyZW1haW5pbmdDb25kaXRpb24pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25kaXRpb25zLnB1c2gocGFyc2VTaW5nbGVDb25kaXRpb24ocmVtYWluaW5nQ29uZGl0aW9uKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgY29uZGl0aW9ucywgb3BlcmF0b3JzIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlU2luZ2xlQ29uZGl0aW9uKGNvbmRpdGlvbikge1xuICAgIGNvbnN0IGNvbXBhcmlzb25PcGVyYXRvcnMgPSBbJz49JywgJzw9JywgJz09JywgJz4nLCAnPCcsICchPSddO1xuICAgIGZvciAobGV0IG9wZXJhdG9yIG9mIGNvbXBhcmlzb25PcGVyYXRvcnMpIHtcbiAgICAgICAgaWYgKGNvbmRpdGlvbi5pbmNsdWRlcyhvcGVyYXRvcikpIHtcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGNvbmRpdGlvbi5zcGxpdChvcGVyYXRvcikubWFwKHMgPT4gcy50cmltKCkpO1xuICAgICAgICAgICAgcmV0dXJuIHsga2V5LCBvcGVyYXRvciwgdmFsdWUgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY29uZGl0aW9uOiAke2NvbmRpdGlvbn1gKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVRdWVyeShqc29uLCBwYXJzZWRRdWVyeSkge1xuICAgIGxldCByZXN1bHQgPSBqc29uO1xuICAgIGxldCBmaW5hbFJlc3VsdDtcblxuICAgIHBhcnNlZFF1ZXJ5LmZvckVhY2gocGFydCA9PiB7XG4gICAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdmaWVsZCcpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFtwYXJ0Lm5hbWVdO1xuICAgICAgICB9IGVsc2UgaWYgKHBhcnQudHlwZSA9PT0gJ2ZpbHRlcicpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY29uZGl0aW9ucywgb3BlcmF0b3JzIH0gPSBwYXJzZUNvbmRpdGlvbihwYXJ0LmNvbmRpdGlvbik7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFJlc3VsdCA9IHJlc3VsdFtwYXJ0LmZpZWxkXS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2YWx1YXRlQ29uZGl0aW9ucyhpdGVtLCBjb25kaXRpb25zLCBvcGVyYXRvcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgZmlsdGVyZWQgcmVzdWx0IGluIGZpbmFsUmVzdWx0XG4gICAgICAgICAgICBpZiAoIWZpbmFsUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZmluYWxSZXN1bHQgPSBmaWx0ZXJlZFJlc3VsdDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTWVyZ2UgdGhlIGZpbHRlcmVkIHJlc3VsdCB3aXRoIGZpbmFsUmVzdWx0XG4gICAgICAgICAgICAgICAgZmluYWxSZXN1bHQgPSBmaW5hbFJlc3VsdC5jb25jYXQoZmlsdGVyZWRSZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBJZiBubyBmaWx0ZXIgY29uZGl0aW9ucyB3ZXJlIGFwcGxpZWQsIGZpbmFsUmVzdWx0IHdpbGwgYmUgdW5kZWZpbmVkLCBzbyBzZXQgaXQgdG8gdGhlIG9yaWdpbmFsIHJlc3VsdFxuICAgIGZpbmFsUmVzdWx0ID0gZmluYWxSZXN1bHQgfHwgcmVzdWx0O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHBhcnNlZFF1ZXJ5Lmxlbmd0aCA+IDAgJiYgcGFyc2VkUXVlcnlbcGFyc2VkUXVlcnkubGVuZ3RoIC0gMV0udHlwZSA9PT0gJ2ZpZWxkJykge1xuICAgICAgICAgICAgLy8gTWFwIG9ubHkgdGhlIHJlcXVpcmVkIGZpZWxkIGZyb20gZmluYWxSZXN1bHQgaWYgdGhlIGxhc3QgcGFydCBvZiB0aGUgcXVlcnkgaXMgYSAnZmllbGQnIHR5cGVcbiAgICAgICAgICAgIGZpbmFsUmVzdWx0ID0gZmluYWxSZXN1bHQubWFwKGl0ZW0gPT4gaXRlbVtwYXJzZWRRdWVyeVtwYXJzZWRRdWVyeS5sZW5ndGggLSAxXS5uYW1lXSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIC8vIEhhbmRsZSBhbnkgcG90ZW50aWFsIGVycm9ycyBkdXJpbmcgbWFwcGluZ1xuICAgICAgICByZXR1cm4gZmluYWxSZXN1bHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbmFsUmVzdWx0O1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZUNvbmRpdGlvbnMoaXRlbSwgY29uZGl0aW9ucywgb3BlcmF0b3JzKSB7XG4gICAgbGV0IHJlc3VsdCA9IGV2YWx1YXRlQ29uZGl0aW9uKGl0ZW0sIGNvbmRpdGlvbnNbMF0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcGVyYXRvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgb3BlcmF0b3IgPSBvcGVyYXRvcnNbaV07XG4gICAgICAgIGNvbnN0IG5leHRDb25kaXRpb25SZXN1bHQgPSBldmFsdWF0ZUNvbmRpdGlvbihpdGVtLCBjb25kaXRpb25zW2kgKyAxXSk7XG5cbiAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnJiYnKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgJiYgbmV4dENvbmRpdGlvblJlc3VsdDtcbiAgICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gJ3x8Jykge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0IHx8IG5leHRDb25kaXRpb25SZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZUNvbmRpdGlvbihpdGVtLCBjb25kaXRpb24pIHtcbiAgICBjb25zdCB7IGtleSwgb3BlcmF0b3IsIHZhbHVlIH0gPSBjb25kaXRpb247XG4gICAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgICAgICBjYXNlICc+PSc6IHJldHVybiBpdGVtW2tleV0gPj0gTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgY2FzZSAnPD0nOiByZXR1cm4gaXRlbVtrZXldIDw9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgIGNhc2UgJz09JzogcmV0dXJuIGl0ZW1ba2V5XSA9PSB2YWx1ZTtcbiAgICAgICAgY2FzZSAnPic6IHJldHVybiBpdGVtW2tleV0gPiBOdW1iZXIodmFsdWUpO1xuICAgICAgICBjYXNlICc8JzogcmV0dXJuIGl0ZW1ba2V5XSA8IE51bWJlcih2YWx1ZSk7XG4gICAgICAgIGNhc2UgJyE9JzogcmV0dXJuIGl0ZW1ba2V5XSAhPSB2YWx1ZTtcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBb0M7OztBQ0E3QixTQUFTLFdBQVcsT0FBTztBQUM5QixRQUFN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RUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLFNBQVMsT0FBTyxHQUFHO0FBQ2pELGNBQU0sS0FBSyxTQUFTLGNBQWMsWUFBWSxFQUFFO0FBQ25ELFlBQUksQ0FBQztBQUFJO0FBQ1AsZUFBTyxLQUFLLE1BQU0sR0FBRyxTQUFTO0FBQUEsTUFDL0IsT0FBTztBQUNOLGVBQU8sS0FBSyxNQUFNLE1BQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxLQUFLLEVBQUUsQ0FBQztBQUFBLE1BQ3hEO0FBRUEsWUFBTSxRQUFRLFlBQVksTUFBTSxJQUFJO0FBRXBDLFVBQUksYUFBYSxLQUFLO0FBQ3BCLFlBQUksVUFBVSxRQUFXO0FBQ3pCLGdCQUFNLFNBQVMsU0FBUyxjQUFjLFNBQVM7QUFDL0MsY0FBSTtBQUFRLG1CQUFPLE9BQU87QUFFekIsZ0JBQU0sT0FBTyxPQUFPLEtBQUssS0FBSztBQUM5QixnQkFBTSxpQkFBaUIsS0FBSyxNQUFNLFNBQU8sQ0FBQyxNQUFNLFNBQVMsR0FBRyxDQUFDLENBQUM7QUFFakUsY0FBSSxPQUFPLFVBQVUsWUFBWSxPQUFPLFVBQVUsWUFBWSxPQUFPLFVBQVUsV0FBVztBQUN6RixnQkFBSSx1QkFBTyxNQUFNLFNBQVMsQ0FBQztBQUFBLFVBQ3pCLFdBQVcsZ0JBQWdCO0FBQzFCLGdCQUFJLHVCQUFPLGtCQUFrQixLQUFLLFNBQVEsRUFBRztBQUFBLFVBQzlDLE9BQU87QUFDTixnQkFBSSx1QkFBTyxpQkFBaUIsS0FBSyxTQUFTLHFCQUErQixLQUFLLEtBQUssSUFBSSxDQUFDO0FBQUEsVUFDekY7QUFBQSxRQUNEO0FBQUEsTUFDRixPQUFPO0FBQ0wsY0FBTSxVQUFVLEtBQUssUUFBUSxHQUFHO0FBQ2hDLGNBQU0sYUFBYSxFQUFFLE1BQU0sT0FBTyxNQUFNLElBQUksS0FBSyxPQUFPO0FBQ3hELGNBQU0sY0FBYyxPQUFPLFVBQVUsV0FBVyxRQUFRLEtBQUssVUFBVSxLQUFLO0FBQzVFLGVBQU8sYUFBYSxhQUFhLEVBQUUsTUFBTSxPQUFPLE1BQU0sSUFBSSxRQUFRLEdBQUcsVUFBVTtBQUFBLE1BQ2pGO0FBQUEsSUFDRixDQUFDLENBQUM7QUFBQSxFQXlDSDtBQUVEO0FBRUEsU0FBUyxZQUFZLE1BQWMsTUFBYztBQUNoRCxNQUFJLFNBQVM7QUFBSSxXQUFPO0FBQ3hCLFNBQU8sS0FBSyxNQUFNLEdBQUcsRUFBRSxPQUFPLENBQUMsS0FBSyxRQUFRLElBQUksR0FBRyxHQUFHLElBQUk7QUFDM0Q7IiwKICAibmFtZXMiOiBbXQp9Cg==
